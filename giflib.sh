#!/bin/bash
# cpu av8 av7 x86 x64
# NDK +++ +++ +++ +++ clang
# GNU +++ +++  .   .  gcc
# WIN +++ +++  .   .  clang/gcc

lib='giflib'
apt='libgif-dev'
dsc='Library for manipulating GIF files'
lic='other'
src='https://git.code.sf.net/p/giflib/code.git'
cfg='cmake'
pc_llib='-lgif'
eta='18'

lst_inc='gif_lib.h'
lst_lib='libgiflib'
lst_bin='giftext gifsponge giffilter giffix gifecho gifbg gifhisto gifwedge giftool gifclrmp gif2rgb gifcolor gifbuild gifinto'
lst_lic='COPYING AUTHORS'
lst_pc='giflib.pc'

cbk="BUILD_UTILITIES"

. xbuilder.sh

start

# patch 01: create CMakeLists with dual static+shared build support
<<'XB_PATCH'
LS0tIENNYWtlTGlzdHMudHhfCTIwMjItMDEtMTggMTE6MTU6NTIuOTU2MjQ1NDAwICswMDAwCisr
KyBDTWFrZUxpc3RzLnR4dAkyMDIyLTAxLTE4IDExOjE2OjE4LjQyNjI0NTQwMCArMDAwMApAQCAt
MCwwICsxLDg4IEBACitjbWFrZV9taW5pbXVtX3JlcXVpcmVkKFZFUlNJT04gMi44LjEyKQorCitw
cm9qZWN0KGdpZmxpYiBDKQorCitvcHRpb24oQlVJTERfU1RBVElDX0xJQlMgIkJ1aWxkIHN0YXRp
YyBsaWJzIiBPTikKK29wdGlvbihCVUlMRF9VVElMSVRJRVMgIkJ1aWxkIHV0aWxpdGllcyIgT0ZG
KQorb3B0aW9uKElOU1RBTExfTUFOICJJbnN0YWxsIG1hbiIgT0ZGKQorb3B0aW9uKElOU1RBTExf
RE9DUyAiSW5zdGFsbCBkb2NzIiBPRkYpCisKK2V4ZWN1dGVfcHJvY2VzcyhDT01NQU5EIC4vZ2V0
dmVyc2lvbgorICAgIFdPUktJTkdfRElSRUNUT1JZICR7Q01BS0VfU09VUkNFX0RJUn0KKyAgICBP
VVRQVVRfVkFSSUFCTEUgVkVSU0lPTgorICAgIE9VVFBVVF9TVFJJUF9UUkFJTElOR19XSElURVNQ
QUNFCispCisKK3NldChMSUJNQUpPUiA3KQorc2V0KExJQk1JTk9SIDEpCitzZXQoTElCUE9JTlQg
MCkKK3NldChMSUJWRVIgIiR7TElCTUFKT1J9LiR7TElCTUlOT1J9LiR7TElCUE9JTlR9IikKKwor
c2V0KGdpZmxpYl9TUkMgZGdpZl9saWIuYyBlZ2lmX2xpYi5jIGdldGFyZy5jCisgICAgZ2lmYWxs
b2MuYyBnaWZfZXJyLmMgZ2lmX2ZvbnQuYyBnaWZfaGFzaC5jCisgICAgb3BlbmJzZC1yZWFsbG9j
YXJyYXkuYyBxcHJpbnRmLmMgcXVhbnRpemUuYworKQorCitzZXQoZ2lmbGliX0lOU1RBTExBQkxF
IGdpZjJyZ2IgZ2lmYnVpbGQgZ2lmZWNobworICAgIGdpZmZpbHRlciBnaWZmaXggZ2lmaW50byBn
aWZ0ZXh0IGdpZnRvb2wKKyAgICBnaWZzcG9uZ2UgZ2lmY2xybXAKKykKKworc2V0KGdpZmxpYl9V
VElMUyAke2dpZmxpYl9JTlNUQUxMQUJMRX0KKyAgICBnaWZiZyBnaWZjb2xvciBnaWZoaXN0byBn
aWZ3ZWRnZQorKQorCitzZXQoZ2lmbGliX0RPQ1MgTkVXUyBUT0RPCisgICAgZ2V0dmVyc2lvbiBD
aGFuZ2VMb2cgaGlzdG9yeS5hZG9jCisgICAgY29udHJvbCBkb2MvKi54bWwgZG9jLyoudHh0Cisg
ICAgZG9jL2luZGV4Lmh0bWwuaW4gZG9jLzAwUkVBRE1FCispCisKK2ZpbGUoR0xPQiBnaWZsaWJf
TUFOIGRvYy8qLjEpCisKK3NldChnaWZsaWJfdGFyZ2V0cyBnaWZsaWIpCithZGRfbGlicmFyeShn
aWZsaWIgJHtnaWZsaWJfU1JDfSkKK3RhcmdldF9saW5rX2xpYnJhcmllcyhnaWZsaWIgbSkKK3Nl
dF90YXJnZXRfcHJvcGVydGllcyhnaWZsaWIgUFJPUEVSVElFUyBWRVJTSU9OICR7TElCVkVSfSBT
T1ZFUlNJT04gJHtMSUJNQUpPUn0pCitpZihXSU4zMikKKyAgc2V0X3RhcmdldF9wcm9wZXJ0aWVz
KGdpZmxpYiBQUk9QRVJUSUVTIFNVRkZJWCAiLSR7TElCTUFKT1J9JHtDTUFLRV9TSEFSRURfTElC
UkFSWV9TVUZGSVh9IikKK2VuZGlmKFdJTjMyKQorCitpZihCVUlMRF9TSEFSRURfTElCUyBBTkQg
QlVJTERfU1RBVElDX0xJQlMpCisgIGFkZF9saWJyYXJ5KGdpZmxpYl9zdGF0aWMgU1RBVElDICR7
Z2lmbGliX1NSQ30pCisgIHNldF90YXJnZXRfcHJvcGVydGllcyhnaWZsaWJfc3RhdGljIFBST1BF
UlRJRVMgT1VUUFVUX05BTUUgZ2lmbGliKQorICBsaXN0KEFQUEVORCAoZ2lmbGliX3RhcmdldHMg
Z2lmbGliX3N0YXRpYykKK2VuZGlmKCkKKworaWYoQlVJTERfVVRJTElUSUVTKQorICBmb3JlYWNo
KFVUSUxJVFkgJHtnaWZsaWJfVVRJTFN9KQorICAgIGFkZF9leGVjdXRhYmxlKCR7VVRJTElUWX0g
JHtVVElMSVRZfS5jKQorICAgIHRhcmdldF9saW5rX2xpYnJhcmllcygke1VUSUxJVFl9IGdpZmxp
YikKKyAgZW5kZm9yZWFjaCgpCitlbmRpZigpCisKK2luc3RhbGwoVEFSR0VUUyAke2dpZmxpYl90
YXJnZXRzfQorICBSVU5USU1FIERFU1RJTkFUSU9OIGJpbgorICBBUkNISVZFIERFU1RJTkFUSU9O
IGxpYiR7TElCX1NVRkZJWH0KKyAgTElCUkFSWSBERVNUSU5BVElPTiBsaWIke0xJQl9TVUZGSVh9
KQorZW5kaWYoKQorCitpZihCVUlMRF9VVElMSVRJRVMpCisgIGZvcmVhY2goVVRJTElUWSAke2dp
ZmxpYl9VVElMU30pCisgICAgaW5zdGFsbChUQVJHRVRTICR7VVRJTElUWX0gREVTVElOQVRJT04g
YmluKQorICBlbmRmb3JlYWNoKCkKK2VuZGlmKCkKKworaW5zdGFsbChGSUxFUyBnaWZfbGliLmgg
REVTVElOQVRJT04gaW5jbHVkZSkKKworaWYoSU5TVEFMTF9NQU4pCisgIGluc3RhbGwoRklMRVMg
JHtnaWZsaWJfTUFOfSBERVNUSU5BVElPTiAke0NNQUtFX0lOU1RBTExfUFJFRklYfS9tYW4vbWFu
MSkKK2VuZGlmKCkKKworaWYoSU5TVEFMTF9ET0NTKQorICBpbnN0YWxsKEZJTEVTICR7Z2lmbGli
X0RPQ1N9IERFU1RJTkFUSU9OICR7Q01BS0VfSU5TVEFMTF9QUkVGSVh9L3NoYXJlL2RvYy9naWZs
aWIpCitlbmRpZigpCisKK2luc3RhbGwoRElSRUNUT1JZICR7Q01BS0VfQ1VSUkVOVF9TT1VSQ0Vf
RElSfS9kb2MKKyAgICBERVNUSU5BVElPTiAke0NNQUtFX0lOU1RBTExfUFJFRklYfS9zaGFyZS9k
b2MvZ2lmbGliCisgICAgQ09QWUlORyBBVVRIT1JTKQ==
XB_PATCH
